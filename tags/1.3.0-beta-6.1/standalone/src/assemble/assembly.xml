<assembly>
    <formats>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>true</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>${project.basedir}/src/main/install/bin</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>**/*.bat</include>
            </includes>
            <lineEnding>dos</lineEnding>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/bin</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>*.sh</include>
                <include>artifactoryctl</include>
                <include>artifactory.default</include>
            </includes>
            <lineEnding>unix</lineEnding>
            <fileMode>0755</fileMode>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/bin</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>**/*.conf</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/bin</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>**/*.exe</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/etc</directory>
            <outputDirectory>etc</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/misc</directory>
            <outputDirectory>misc</outputDirectory>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/../core/src/main/resources/META-INF/default</directory>
            <outputDirectory>etc</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/lib</directory>
            <outputDirectory>lib</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install</directory>
            <outputDirectory/>
            <includes>
                <include>*.txt</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/logs</directory>
            <outputDirectory>logs</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/install/work</directory>
            <outputDirectory>work</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/target</directory>
            <outputDirectory/>
            <includes>
                <include>*.jar</include>
            </includes>
            <excludes>
                <exclude>*-sources.jar</exclude>
            </excludes>
        </fileSet>
    </fileSets>
    <dependencySets>
        <!-- add the artifactory war file to the webapp dir -->
        <dependencySet>
            <outputDirectory>webapps</outputDirectory>
            <outputFileNameMapping>artifactory.war</outputFileNameMapping>
            <useStrictFiltering>true</useStrictFiltering>
            <includes>
                <include>org.artifactory:artifactory-webapp</include>
            </includes>
        </dependencySet>
        <!-- add some mandatory dependencies to jetty lib directory -->
        <dependencySet>
            <outputDirectory>lib</outputDirectory>
            <useStrictFiltering>true</useStrictFiltering>
            <scope>compile</scope>
            <includes>
                <include>org.artifactory:artifactory-config</include>
                <include>org.mortbay.jetty:jetty</include>
                <include>org.mortbay.jetty:jetty-ajp</include>
                <include>org.mortbay.jetty:jetty-util</include>
                <include>org.mortbay.jetty:servlet-api-2.5</include>
                <include>org.slf4j:slf4j-api</include>
                <include>ch.qos.logback:logback-core</include>
                <include>ch.qos.logback:logback-classic</include>
                <include>commons-io:commons-io</include>
            </includes>
        </dependencySet>
    </dependencySets>
</assembly>
